<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Appointments - AsendHealth</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='astra-theme.css') }}" />
  <!-- Google Fonts -->
  <!--link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!--link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"-->
  <link href="https://fonts.googleapis.com/css?family=DM+Sans%3A400%2C%2C700%7CForum%3A400&amp;display=fallback&amp;ver=4.9.1"
  id="astra-google-fonts-css" media="all" rel="stylesheet" />
  <!-- AsendHealth CSS -->
  <link href="https://asendhealth.com/wp-content/themes/astra/assets/css/minified/main.min.css?ver=4.9.1"
  id="astra-theme-css-css" media="all" rel="stylesheet" />
  <link href="https://asendhealth.com/wp-includes/css/dist/block-library/style.min.css?ver=6.7.2"
  id="wp-block-library-css" media="all" rel="stylesheet" />
  <link href="https://asendhealth.com/wp-content/plugins/suretriggers/assets/css/st-trigger-button.css?ver=1.0.83"
  id="st-trigger-button-style-css" media="all" rel="stylesheet" />
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    body {
      background-color: #f0f5fa;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: #334155;
      margin: 0;
      padding: 0;
      line-height: 1.6;
    }
    
    /*Commented so the header styling is applied from style.css */
    /*header {
      background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }*/
    
    header nav ul {
      display: flex;
      list-style: none;
      margin: 0;
      padding: 0;
    }
    
    header nav li a {
      color: white;
      display: block;
      padding: 15px 20px;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    header nav li a:hover {
      background-color: rgba(255, 255, 255, 0.1);
      transform: translateY(-2px);
    }
    
    header nav li a.active {
      font-weight: 600;
      background-color: rgba(255, 255, 255, 0.15);
    }
    
    header nav li a.active::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 3px;
      background-color: rgba(255, 255, 255, 0.8);
    }
    
    main {
      padding: 30px;
      max-width: 1280px;
      margin: 0 auto;
    }
    
    main h1 {
      color: var(--ast-global-color-1); /*#1e40af;*/
      font-size: 2.2rem;
      margin-bottom: 0.5rem;
      font-weight: 700;
      letter-spacing: -0.5px;
    }
    
    main p {
      color: #64748b;
      font-size: 1.1rem;
      margin-bottom: 2rem;
    }
    
    .appointments-container {
      display: grid;
      grid-template-columns: 1fr 2fr;
      gap: 30px;
      position: relative;
    }
    
    .filter-panel, .appointments-list, .appointment-form {
      background: white;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.03);
      padding: 25px;
      border: 1px solid rgba(226, 232, 240, 0.8);
      transition: all 0.3s ease;
    }
    
    .filter-panel:hover, .appointments-list:hover, .appointment-form:hover {
      box-shadow: 0 10px 25px rgba(0,0,0,0.05);
    }
    
    .filter-panel {
      -webkit-backdrop-filter: blur(8px);
      backdrop-filter: blur(8px);
      background: rgba(255,255,255,0.95);
      border: 1px solid rgba(226, 232, 240, 0.6);
      border-radius: 16px;
      box-shadow: 0 6px 24px rgba(0,0,0,0.05);
      padding: 30px;
      height: fit-content;
      position: sticky;
      top: 30px;
    }
    
    .filter-panel h2 {
      margin-top: 0;
      margin-bottom: 20px;
      color: var(--ast-global-color-1); /*#1e3a8a;*/
      font-size: 1.5rem;
      font-weight: 600;
    }
    
    .filter-section {
      margin-bottom: 25px;
    }
    
    .filter-section h3 {
      margin-top: 0;
      padding-bottom: 10px;
      color: var(--text-medium); /*#334155;*/
      font-size: 1.1rem;
      font-weight: 600;
      position: relative;
      display: flex;
      align-items: center;
    }
    
    .filter-section h3::before {
      content: '';
      display: inline-block;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: var(--ast-global-color-1); /*#3b82f6;*/
      margin-right: 8px;
    }
    
    .filter-options {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .filter-options label {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      font-size: 0.95rem;
      color: #475569;
      transition: color 0.2s ease;
    }
    
    .filter-options label:hover {
      color: var(--ast-global-color-1); /*#1e40af;*/
    }
    
    .filter-options input[type="checkbox"] {
      appearance: none;
      width: 18px;
      height: 18px;
      border: 2px solid #cbd5e1;
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.2s ease;
      position: relative;
    }
    
    .filter-options input[type="checkbox"]:checked {
      background-color: var(--ast-global-color-1); /*#3b82f6;*/
      border-color: var(--ast-global-color-1); /*#3b82f6;*/
    }
    
    .filter-options input[type="checkbox"]:checked::after {
      content: '';
      position: absolute;
      left: 5px;
      top: 2px;
      width: 5px;
      height: 10px;
      border: solid white;
      border-width: 0 2px 2px 0;
      transform: rotate(45deg);
    }
    
    .filter-options select {
      padding: 10px 12px;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      font-size: 0.95rem;
      color: #475569;
      background-color: white;
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .filter-options select:focus {
      outline: none;
      border-color: var(--ast-global-color-1); /*#3b82f6;*/
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    
    .appointments-list {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    
    .hospital-card {
      background: linear-gradient(to right, #ffffff, #f8fafc);
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .hospital-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 5px;
      height: 100%;
      background: linear-gradient(to bottom, var(--ast-global-color-1), #60a5fa);
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .hospital-card:hover {
      border-color: #bfdbfe;
      box-shadow: 0 10px 15px rgba(59, 130, 246, 0.1);
      transform: translateY(-3px);
    }
    
    .hospital-card:hover::before {
      opacity: 1;
    }
    
    .hospital-card.selected {
      border-color: var(--ast-global-color-1); /*#3b82f6;*/
      background-color: #f0f7ff;
    }
    
    .hospital-card.selected::before {
      opacity: 1;
    }
    
    .hospital-card h3 {
      margin-top: 0;
      color: var(--ast-global-color-1); /*#1e40af;*/
      font-size: 1.2rem;
      font-weight: 600;
    }
    
    .hospital-meta {
      display: flex;
      gap: 18px;
      margin: 12px 0;
      font-size: 0.9em;
      color: var(--text-light); /*#64748b;*/
    }
    
    .hospital-meta span {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .hospital-meta svg {
      width: 16px;
      height: 16px;
      fill: #60a5fa;
    }
    
    .doctor-list {
      display: none;
      margin-top: 18px;
      border-top: 1px solid #e2e8f0;
      padding-top: 18px;
    }
    
    .hospital-card.selected .doctor-list {
      display: block;
      animation: fadeIn 0.4s ease;
    }
    
    @keyframes fadeIn {
      0% { opacity: 0; transform: translateY(10px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    
    .doctor-card {
      display: flex;
      align-items: center;
      gap: 18px;
      padding: 14px;
      border-radius: 10px;
      margin-bottom: 12px;
      transition: all 0.2s ease;
      border: 1px solid transparent;
    }
    
    .doctor-card:hover {
      background-color: #f8fafc;
      border-color: #e2e8f0;
    }
    
    .doctor-card.selected {
      background-color: #f0f9ff;
      border: 1px solid #bae6fd;
    }
    
    .doctor-avatar {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--ast-global-color-1), #93c5fd);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 18px;
      box-shadow: 0 4px 10px rgba(59, 130, 246, 0.2);
    }
    
    .doctor-info {
      flex: 1;
    }
    
    .doctor-info h4 {
      margin: 0 0 5px 0;
      color: #334155;
      font-size: 1.05rem;
    }
    
    .doctor-info p {
      margin: 0;
      font-size: 0.9em;
      color: #64748b;
    }
    
    .book-btn {
      padding: 10px 18px;
      background: linear-gradient(135deg, var(--ast-global-color-1), #2563eb);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(37, 99, 235, 0.2);
    }
    
    .book-btn:hover {
      background: linear-gradient(135deg, var(--ast-global-color-1), #1d4ed8);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
    }
    
    .appointment-form {
      display: none;
      margin-top: 20px;
      grid-column: 1 / span 2;
      animation: slideUp 0.4s ease;
    }
    
    @keyframes slideUp {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    
    .appointment-form.active {
      display: block;
    }
    
    .form-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 1px solid #e2e8f0;
    }
    
    .form-header h3 {
      margin: 0;
      color: var(--ast-global-color-1); /*#1e40af;*/
      font-size: 1.3rem;
      font-weight: 600;
    }
    
    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      color: #334155;
      font-weight: 500;
      font-size: 0.95rem;
    }
    
    .form-group input, 
    .form-group select, 
    .form-group textarea {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      font-size: 1rem;
      transition: all 0.3s ease;
      background-color: #f8fafc;
    }
    
    .form-group input:focus, 
    .form-group select:focus, 
    .form-group textarea:focus {
      outline: none;
      border-color: var(--ast-global-color-1); /*#3b82f6;*/
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      background-color: white;
    }
    
    .form-actions {
      display: flex;
      justify-content: flex-end;
      gap: 15px;
      margin-top: 25px;
    }
    
    .cancel-btn {
      padding: 12px 22px;
      background-color: white;
      color: #64748b;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    
    .cancel-btn:hover {
      background-color: #f1f5f9;
      color: #334155;
      border-color: #cbd5e1;
    }
    
    .submit-btn {
      padding: 12px 25px;
      background: linear-gradient(135deg, var(--ast-global-color-1), #2563eb);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 2px 10px rgba(37, 99, 235, 0.2);
    }
    
    .submit-btn:hover {
      background: linear-gradient(135deg, var(--ast-global-color-1), #1d4ed8);
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
    }
    
    .success-msg {
      display: none;
      margin-top: 20px;
      padding: 20px;
      background-color: #f0fdf4;
      border: 1px solid #bbf7d0;
      border-radius: 10px;
      color: #166534;
      text-align: center;
      animation: fadeIn 0.5s ease;
    }
    
    .success-msg.active {
      display: block;
    }
    
    .success-msg h3 {
      color: #15803d;
      margin-top: 0;
    }
    
    /* Responsive adjustments */
    @media (max-width: 992px) {
      main {
        padding: 20px;
      }
      
      .appointments-container {
        grid-template-columns: 1fr;
        gap: 20px;
      }
    }
    
    @media (max-width: 768px) {
      .appointments-container {
        grid-template-columns: 1fr;
      }
      
      .filter-panel {
        position: relative;
        top: 0;
      }
      
      .form-grid {
        grid-template-columns: 1fr;
      }
      
      .hospital-meta {
        flex-direction: column;
        gap: 10px;
      }
    }
  .filter-panel {
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(8px);
  background: rgba(255,255,255,0.95);
  border: 1px solid rgba(226, 232, 240, 0.6);
}

.filter-section h3 {
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--ast-global-color-1); /*#1e3a8a;*/
}

/* Enhanced Hospital Cards */
.hospital-card {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  border: 1px solid transparent;
  background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
}

.hospital-card:hover {
  border-color: #bfdbfe;
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(59, 130, 246, 0.08);
}

/* Modern Form Design */
.appointment-form {
  background: linear-gradient(145deg, #f8fafc 0%, #ffffff 100%);
  border: 1px solid #e2e8f0;
  box-shadow: 0 8px 32px rgba(0,0,0,0.04);
}

.form-group input, 
.form-group select, 
.form-group textarea {
  background: rgba(255,255,255,0.9);
  border: 1px solid #e2e8f0;
}

/* Animated Success Message */
.success-msg {
  background: linear-gradient(145deg, #dcfce7, #bbf7d0);
  border: none;
  padding: 1.5rem;
  display: flex;
  align-items: center;
  gap: 1rem;
  border-radius: 12px;
}

.success-msg::before {
  content: 'âœ“';
  font-size: 1.5rem;
  color: #166534;
  font-weight: bold;
}

/* Enhanced Modal */
.modal-content {
  background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
  border: 1px solid rgba(226, 232, 240, 0.6);
  box-shadow: 0 12px 32px rgba(0,0,0,0.08);
}

/* Better Responsiveness */
@media (max-width: 768px) {
  .appointments-container {
    gap: 1rem;
  }
  
  .filter-panel {
    padding: 1.5rem;
  }
  
  .hospital-card {
    padding: 1.25rem;
  }
}

/* Enhanced Interactive Elements */
button, .btn {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

button:active {
  transform: scale(0.98);
}

.book-btn {
  background: linear-gradient(135deg, #3b82f6, #2563eb);
  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.15);
}

/* Navigation Animation */
header nav li a::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  width: 0;
  height: 2px;
  background: white;
  transition: all 0.3s ease;
}

header nav li a:hover::after {
  width: 100%;
  left: 0;
}

/* Improved Checkboxes */
.filter-options input[type="checkbox"]:checked {
  background: #3b82f6 url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z'/%3E%3C/svg%3E") center/12px no-repeat;
}

/* Gradient Border Animation */
.hospital-card::before {
  background: linear-gradient(45deg, var(--ast-global-color-1), #60a5fa);
  width: 3px;
}

  </style>
</head>
<body>
  <!-- Navigation Header -->
  <!--nav>
  <ul>
    <li><a href="/dashboard">Dashboard</a></li>
    <li><a href="/areya">Areya</a></li>
    <li><a href="/history">History</a></li>
    <li><a href="/appointments" class="active">Appointments</a></li>
    <li><a href="/feedback">Feedback</a></li>
    <li><a href="#" id="logoutBtn">Logout</a></li>
  </ul>
</nav-->
  <header class="site-header header-main-layout-1 ast-primary-menu-enabled ast-logo-title-inline ast-hide-custom-menu-mobile ast-builder-menu-toggle-icon ast-mobile-header-inline"
  id="masthead" itemid="#masthead" itemscope="itemscope" itemtype="https://schema.org/WPHeader">
  <div data-toggle-type="dropdown" id="ast-desktop-header">
    <div class="ast-main-header-wrap main-header-bar-wrap">
      <div class="ast-primary-header-bar ast-primary-header main-header-bar site-header-focus-item"
        data-section="section-primary-header-builder">
        <div class="site-primary-header-wrap ast-builder-grid-row-container site-header-focus-item ast-container"
          data-section="section-primary-header-builder">
          <div class="ast-builder-grid-row ast-builder-grid-row-has-sides ast-builder-grid-row-no-center">
            <div class="site-header-primary-section-left site-header-section ast-flex site-header-section-left">
              <div class="ast-builder-layout-element ast-flex site-header-focus-item" data-section="title_tagline">
                <div class="site-branding ast-site-identity" itemscope="itemscope"
                  itemtype="https://schema.org/Organization">
                  <span class="site-logo-img"><a class="custom-logo-link" href="https://asendhealth.com/"
                      rel="home"><img alt="AsendHealth" class="custom-logo" decoding="async"
                        src="https://asendhealth.com/wp-content/uploads/2025/04/AsendHealth-logo.png"
                        /></a></span>
                </div>
                <!-- .site-branding -->
              </div>
            </div>
            <div class="site-header-primary-section-right site-header-section ast-flex ast-grid-right-section">
              <div
                class="ast-builder-menu-1 ast-builder-menu ast-flex ast-builder-menu-1-focus-item ast-builder-layout-element site-header-focus-item"
                data-section="section-hb-menu-1">
                <div class="ast-main-header-bar-alignment">
                  <div class="main-header-bar-navigation">
                    <nav aria-label="Site Navigation: Main Menu"
                      class="site-navigation ast-flex-grow-1 navigation-accessibility site-header-focus-item"
                      id="primary-site-navigation-desktop" itemscope="itemscope"
                      itemtype="https://schema.org/SiteNavigationElement">
                      <div class="main-navigation ast-inline-flex">
                        <ul
                          class="main-header-menu ast-menu-shadow ast-nav-menu ast-flex submenu-with-border stack-on-mobile"
                          id="ast-hf-menu-1">
                          <li
                            class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-1169"
                            id="menu-item-1169"><a class="menu-link" href="https://asendhealth.com/">Home</a></li>
                          <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1170"
                            id="menu-item-1170"><a class="menu-link" href="http://127.0.0.1:5000/areya">Areya</a>
                          </li>
                          <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1172"
                            id="menu-item-1172"><a class="menu-link"
                              href="http://127.0.0.1:5000/appointments">Appointments</a></li>
                          <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1171"
                            id="menu-item-1171"><a class="menu-link"
                              href="http://127.0.0.1:5000/dashboard">Dashboard</a></li>
                        </ul>
                      </div>
                    </nav>
                  </div>
                </div>
              </div>
              <!--div class="ast-builder-layout-element ast-flex site-header-focus-item ast-header-button-1"
                data-section="section-hb-button-1">
                <div class="ast-builder-button-wrap ast-builder-button-size-"><a class="ast-custom-button-link"
                    href="tel:202-555-0188" target="_self">
                    <div class="ast-custom-button">202-555-0188</div>
                  </a><a class="menu-link" href="tel:202-555-0188" target="_self">202-555-0188</a></div>
              </div-->
            </div>
          </div>
        </div>
      </div>
    </div> <!-- Main Header Bar Wrap -->
  <div class="ast-mobile-header-wrap" data-type="dropdown" id="ast-mobile-header">
    <div class="ast-main-header-wrap main-header-bar-wrap">
      <div
        class="ast-primary-header-bar ast-primary-header main-header-bar site-primary-header-wrap site-header-focus-item ast-builder-grid-row-layout-default ast-builder-grid-row-tablet-layout-default ast-builder-grid-row-mobile-layout-default"
        data-section="section-primary-header-builder">
        <div class="ast-builder-grid-row ast-builder-grid-row-has-sides ast-builder-grid-row-no-center">
          <div class="site-header-primary-section-left site-header-section ast-flex site-header-section-left">
            <div class="ast-builder-layout-element ast-flex site-header-focus-item" data-section="title_tagline">
              <div class="site-branding ast-site-identity" itemscope="itemscope"
                itemtype="https://schema.org/Organization">
                <span class="site-logo-img"><a class="custom-logo-link" href="https://asendhealth.com/"
                    rel="home"><img alt="AsendHealth" class="custom-logo" decoding="async"
                      src="https://asendhealth.com/wp-content/uploads/2025/04/AsendHealth-logo.png"
                      /></a></span>
              </div>
              <!-- .site-branding -->
            </div>
          </div>
          <div class="site-header-primary-section-right site-header-section ast-flex ast-grid-right-section">
            <div class="ast-builder-layout-element ast-flex site-header-focus-item"
              data-section="section-header-mobile-trigger">
              <div class="ast-button-wrap">
                <button aria-expanded="false"
                  class="menu-toggle main-header-menu-toggle ast-mobile-menu-trigger-fill" type="button">
                  <span class="screen-reader-text">Main Menu</span>
                  <span class="mobile-menu-toggle-icon">
                    <span aria-hidden="true" class="ahfb-svg-iconset ast-inline-flex svg-baseline"><svg
                        class="ast-mobile-svg ast-menu2-svg" fill="currentColor" height="28" version="1.1"
                        viewbox="0 0 24 28" width="24" xmlns="http://www.w3.org/2000/svg">
                        <path
                          d="M24 21v2c0 0.547-0.453 1-1 1h-22c-0.547 0-1-0.453-1-1v-2c0-0.547 0.453-1 1-1h22c0.547 0 1 0.453 1 1zM24 13v2c0 0.547-0.453 1-1 1h-22c-0.547 0-1-0.453-1-1v-2c0-0.547 0.453-1 1-1h22c0.547 0 1 0.453 1 1zM24 5v2c0 0.547-0.453 1-1 1h-22c-0.547 0-1-0.453-1-1v-2c0-0.547 0.453-1 1-1h22c0.547 0 1 0.453 1 1z">
                        </path>
                      </svg></span><span aria-hidden="true"
                      class="ahfb-svg-iconset ast-inline-flex svg-baseline"><svg
                        class="ast-mobile-svg ast-close-svg" fill="currentColor" height="24" version="1.1"
                        viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                        <path
                          d="M5.293 6.707l5.293 5.293-5.293 5.293c-0.391 0.391-0.391 1.024 0 1.414s1.024 0.391 1.414 0l5.293-5.293 5.293 5.293c0.391 0.391 1.024 0.391 1.414 0s0.391-1.024 0-1.414l-5.293-5.293 5.293-5.293c0.391-0.391 0.391-1.024 0-1.414s-1.024-0.391-1.414 0l-5.293 5.293-5.293-5.293c-0.391-0.391-1.024-0.391-1.414 0s-0.391 1.024 0 1.414z">
                        </path>
                      </svg></span> </span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="ast-mobile-header-content content-align-flex-start">
      <div
        class="ast-builder-menu-1 ast-builder-menu ast-flex ast-builder-menu-1-focus-item ast-builder-layout-element site-header-focus-item"
        data-section="section-hb-menu-1">
        <div class="ast-main-header-bar-alignment">
          <div class="main-header-bar-navigation">
            <nav aria-label="Site Navigation: Main Menu"
              class="site-navigation ast-flex-grow-1 navigation-accessibility site-header-focus-item"
              id="primary-site-navigation-mobile" itemscope="itemscope"
              itemtype="https://schema.org/SiteNavigationElement">
              <div class="main-navigation ast-inline-flex">
                <ul
                  class="main-header-menu ast-menu-shadow ast-nav-menu ast-flex submenu-with-border stack-on-mobile"
                  id="ast-hf-menu-1">
                  <li
                    class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-1169">
                    <a class="menu-link" href="https://asendhealth.com/">Home</a>
                  </li>
                  <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1170"><a
                      class="menu-link" href="http://127.0.0.1:5000/areya">Areya</a></li>
                  <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1172"><a
                      class="menu-link" href="http://127.0.0.1:5000/appointments">Appointments</a></li>
                  <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1171"><a
                      class="menu-link" href="http://127.0.0.1:5000/dashboard">Dashboard</a></li>
                </ul>
              </div>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>
  </header>

  <!-- Main Content -->
  <main>
    <h1>Book an Appointment</h1>
    <p>Find and book appointments with healthcare providers across India.</p>
    
    <div class="appointments-container">
      <!-- Filter Panel -->
      <div class="filter-panel">
        <h2>Filters</h2>
        
        <div class="filter-section">
          <h3>Location</h3>
          <div class="filter-options">
            <label for="state-filter">Select State</label>
            <select id="state-filter" aria-label="Filter by state">
              <option value="">All States</option>
            </select>
            
            <label for="district-filter" class="mt-3">Select District</label>
            <select id="district-filter" class="mt-3" aria-label="Filter by district">
              <option value="">All Districts</option>
            </select>
          </div>
        </div>
        
        <div class="filter-section">
          <h3>Speciality</h3>
          <div class="filter-options" id="specialty-filter-options">
            <!-- Hardcoded specialties removed - will be populated by JS -->
          </div>
        </div>
        
        <div class="filter-section">
          <h3>Hospital Type</h3>
          <div class="filter-options" id="hospital-type-filter-options">
            <!-- Hardcoded hospital types removed - will be populated by JS -->
          </div>
        </div>
      </div>
      
      <!-- Appointments List -->
      <div class="appointments-list" id="hospitals-container">
        <!-- Hospital cards will be generated here -->
      </div>
      
      <!-- Appointment Form -->
      <div class="appointment-form" id="appointment-form">
        <div class="form-header">
          <h3>Book Your Appointment</h3>
          <button class="cancel-btn" id="cancel-form">Cancel</button>
        </div>
        
        <div class="form-grid">
          <div class="form-group">
            <label for="patient-name">Your Name</label>
            <input type="text" id="patient-name" placeholder="Enter your full name">
          </div>
          
          <div class="form-group">
            <label for="patient-phone">Phone Number</label>
            <input type="tel" id="patient-phone" placeholder="Enter your phone number">
          </div>
          
          <div class="form-group">
            <label for="appointment-date">Preferred Date</label>
            <input type="date" id="appointment-date">
          </div>
          
          <div class="form-group">
            <label for="appointment-time">Preferred Time</label>
            <select id="appointment-time">
              <option value="">Select a time slot</option>
              <option value="09:00 AM">09:00 AM</option>
              <option value="10:00 AM">10:00 AM</option>
              <option value="11:00 AM">11:00 AM</option>
              <option value="12:00 PM">12:00 PM</option>
              <option value="02:00 PM">02:00 PM</option>
              <option value="03:00 PM">03:00 PM</option>
              <option value="04:00 PM">04:00 PM</option>
              <option value="05:00 PM">05:00 PM</option>
            </select>
          </div>
        </div>
        
        <div class="form-group">
          <label for="appointment-notes">Reason for Visit</label>
          <textarea id="appointment-notes" rows="3" placeholder="Briefly describe your symptoms or reason for the appointment"></textarea>
        </div>
        
        <div class="form-actions">
          <button class="submit-btn" id="book-appointment">Book Appointment</button>
        </div>
      </div>
      
      <div class="success-msg" id="success-message">
        <h3>Appointment Booked Successfully!</h3>
        <p>Your appointment has been confirmed. You will receive a confirmation message shortly.</p>
      </div>
    </div>
  </main>

  <!-- Appointment Form Modal -->
  <div id="appointmentFormModal" class="modal">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <div class="form-header">
        <h3>Book Your Appointment</h3>
      </div>
      
      <div class="form-grid">
        <div class="form-group">
          <label for="patient-name">Your Name</label>
          <input type="text" id="patient-name" placeholder="Enter your full name">
        </div>
        
        <div class="form-group">
          <label for="patient-phone">Phone Number</label>
          <input type="tel" id="patient-phone" placeholder="Enter your phone number">
        </div>
        
        <div class="form-group">
          <label for="appointment-date">Preferred Date</label>
          <input type="date" id="appointment-date">
        </div>
        
        <div class="form-group">
          <label for="appointment-time">Preferred Time</label>
          <select id="appointment-time">
            <option value="">Select a time slot</option>
            <option value="09:00 AM">09:00 AM</option>
            <option value="10:00 AM">10:00 AM</option>
            <option value="11:00 AM">11:00 AM</option>
            <option value="12:00 PM">12:00 PM</option>
            <option value="02:00 PM">02:00 PM</option>
            <option value="03:00 PM">03:00 PM</option>
            <option value="04:00 PM">04:00 PM</option>
            <option value="05:00 PM">05:00 PM</option>
          </select>
        </div>
      </div>
      
      <div class="form-group">
        <label for="appointment-notes">Reason for Visit</label>
        <textarea id="appointment-notes" rows="3" placeholder="Briefly describe your symptoms or reason for the appointment"></textarea>
      </div>
      
      <div class="form-actions">
        <button class="cancel-btn" id="cancel-form">Cancel</button>
        <button class="submit-btn" id="book-appointment">Book Appointment</button>
      </div>
    </div>
  </div>

  <!-- Success Message Modal -->
  <div id="successModal" class="modal">
    <div class="modal-content success-content">
      <span class="close-modal">&times;</span>
      <h3>Appointment Booked Successfully!</h3>
      <p>Your appointment has been confirmed. You will receive a confirmation message shortly.</p>
      <button class="submit-btn" id="book-another">Book Another Appointment</button>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // Check if user is logged in
      const pointId = localStorage.getItem("pointId");
      if (!pointId) {
        window.location.href = "/login";
        return;
      }

      const logoutBtn = document.getElementById("logoutBtn");
      console.log("logoutBtn in appointments.html:", logoutBtn); // Verify
      if (logoutBtn) {
        logoutBtn.addEventListener("click", function(e) {
          e.preventDefault();
          localStorage.removeItem("pointId");
          localStorage.removeItem("patientGuid");
          localStorage.removeItem("userType"); 
          window.location.href = "/"; 
        });
      } else {
        console.warn("Logout button with id 'logoutBtn' not found in appointments.html. Logout functionality for this specific button might not work.");
      }

      // Initialize with empty data, to be filled by API
      let districtsByState = {}; 
      let specialtyRatingsData = {}; // Renamed to avoid conflict with a potential function name
      let locationsData = []; // Renamed from hospitals to match API response key

      const hospitalsContainer = document.getElementById('hospitals-container');
      const formModal = document.getElementById("appointmentFormModal");
      const successModal = document.getElementById("successModal");
      const closeBtns = document.querySelectorAll(".close-modal");
      const bookAnotherBtn = document.getElementById("book-another");
      const modalCancelFormBtn = formModal ? formModal.querySelector('#cancel-form') : null;
      const modalBookAppointmentBtn = formModal ? formModal.querySelector('#book-appointment') : null;
      
      const stateFilter = document.getElementById('state-filter');
      const districtFilter = document.getElementById('district-filter');
      const specialtyFilterContainer = document.getElementById('specialty-filter-options');
      const hospitalTypeFilterContainer = document.getElementById('hospital-type-filter-options');

      let selectedDoctor = null;
      let selectedHospital = null; // This will store a location object from locationsData

      // --- START: ASYNC FUNCTION TO FETCH AND INITIALIZE PAGE DATA ---
      async function initializePageData() {
        try {
          const response = await fetch('/api/appointment-page-data');
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          const data = await response.json();

          if (data.success) {
            locationsData = data.locations || [];
            districtsByState = data.filter_options.districts_by_state || {};
            specialtyRatingsData = data.specialty_ratings || {};

            // Populate State Filter
            if (stateFilter && data.filter_options.states) {
              stateFilter.innerHTML = '<option value="">All States</option>'; // Clear previous and add default
              data.filter_options.states.forEach(state => {
                const option = document.createElement('option');
                option.value = state;
                option.textContent = state;
                stateFilter.appendChild(option);
              });
            }

            // Populate Specialty Filters
            if (specialtyFilterContainer && data.filter_options.specialties) {
              specialtyFilterContainer.innerHTML = ''; // Clear existing
              data.filter_options.specialties.forEach(specialty => {
                const label = document.createElement('label');
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.value = specialty;
                checkbox.addEventListener('change', applyFilters);
                label.appendChild(checkbox);
                label.appendChild(document.createTextNode(` ${specialty}`));
                specialtyFilterContainer.appendChild(label);
              });
            }

            // Populate Hospital Type Filters (using location_type from API)
            if (hospitalTypeFilterContainer && data.filter_options.types) { // `types` from postgres.py
                hospitalTypeFilterContainer.innerHTML = ''; // Clear existing
                data.filter_options.types.forEach(type => {
                    const label = document.createElement('label');
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.value = type;
                    checkbox.addEventListener('change', applyFilters);
                    label.appendChild(checkbox);
                    label.appendChild(document.createTextNode(` ${type}`));
                    hospitalTypeFilterContainer.appendChild(label);
                });
            }

            applyFilters(); // Initial render of locations
          } else {
            console.error("Failed to load appointment page data:", data.message);
            if(hospitalsContainer) hospitalsContainer.innerHTML = '<p>Error loading data. Please try again later.</p>';
          }
        } catch (error) {
          console.error("Error fetching appointment page data:", error);
          if(hospitalsContainer) hospitalsContainer.innerHTML = '<p>Error fetching data from server. Please try again later.</p>';
        }
      }
      // --- END: ASYNC FUNCTION TO FETCH AND INITIALIZE PAGE DATA ---

      function applyFilters() {
        console.log("Applying filters...");
        const selectedState = stateFilter ? stateFilter.value : "";
        const selectedDistrict = districtFilter ? districtFilter.value : "";
        const selectedSpecialties = Array.from(specialtyFilterContainer.querySelectorAll('input[type="checkbox"]:checked'))
                                      .map(cb => cb.value);
        const selectedHospitalTypes = Array.from(hospitalTypeFilterContainer.querySelectorAll('input[type="checkbox"]:checked'))
                                      .map(cb => cb.value);

        let filteredLocations = locationsData.filter(location => {
          const stateMatch = !selectedState || location.state === selectedState;
          const districtMatch = !selectedDistrict || location.district === selectedDistrict;
          
          // Ensure location.specialties exists and is an array before using .some()
          const specialtiesInLocation = Array.isArray(location.specialties) ? location.specialties : [];
          const specialtyMatch = selectedSpecialties.length === 0 || specialtiesInLocation.some(s => selectedSpecialties.includes(s));
          
          const typeMatch = selectedHospitalTypes.length === 0 || selectedHospitalTypes.includes(location.location_type); // Match with location_type
          return stateMatch && districtMatch && specialtyMatch && typeMatch;
        });

        if (selectedSpecialties.length > 0) {
            filteredLocations.sort((a, b) => {
                const aIsBest = selectedSpecialties.some(specialty => 
                  specialtyRatingsData[specialty] && specialtyRatingsData[specialty].includes(a.id)
                );
                const bIsBest = selectedSpecialties.some(specialty => 
                  specialtyRatingsData[specialty] && specialtyRatingsData[specialty].includes(b.id)
                );
                if (aIsBest && !bIsBest) return -1;
                if (!aIsBest && bIsBest) return 1;
                return 0; 
            });
        }
        renderHospitals(filteredLocations, selectedSpecialties); // Changed from renderHospitals to renderLocations
      }

      function openFormModal() {
        if (formModal) {
          const patientNameInput = formModal.querySelector('#patient-name');
          const patientPhoneInput = formModal.querySelector('#patient-phone');
          const appointmentDateInput = formModal.querySelector('#appointment-date');
          const appointmentTimeInput = formModal.querySelector('#appointment-time');
          const appointmentNotesInput = formModal.querySelector('#appointment-notes');

          if(patientNameInput) patientNameInput.value = '';
          if(patientPhoneInput) patientPhoneInput.value = '';
          if(appointmentDateInput) appointmentDateInput.value = '';
          if(appointmentTimeInput) appointmentTimeInput.value = '';
          if(appointmentNotesInput) appointmentNotesInput.value = '';
          
          formModal.classList.add("show");
          document.body.style.overflow = "hidden";
        } else {
          console.error("Appointment form modal not found.");
        }
      }

      function renderHospitals(locationsList, bestSpecialties = []) { // Changed from hospitalsList to locationsList
        if (!hospitalsContainer) {
          console.error("hospitalsContainer is null!");
          return;
        }
        hospitalsContainer.innerHTML = '';
        
        if (!locationsList || locationsList.length === 0) {
          hospitalsContainer.innerHTML = '<p>No locations match your filters or no location data available.</p>';
          return;
        }
        
        locationsList.forEach(location => {
          const hospitalCard = document.createElement('div');
          hospitalCard.className = 'hospital-card';
          hospitalCard.setAttribute('data-id', location.location_id); // Use location_id from API
          
          const isBestInSpecialty = bestSpecialties.some(specialty => 
            specialtyRatingsData[specialty] && specialtyRatingsData[specialty].includes(location.location_id)
          );
          
          if (isBestInSpecialty) {
            hospitalCard.classList.add('best-in-specialty');
          }
          
          const specialtiesText = location.specialties && location.specialties.length > 0 
            ? location.specialties.slice(0, 3).join(', ') + (location.specialties.length > 3 ? '...' : '') 
            : 'N/A';
          
          const bestAt = [];
          if (bestSpecialties.length > 0) {
            bestSpecialties.forEach(specialty => {
              if (specialtyRatingsData[specialty] && specialtyRatingsData[specialty].includes(location.location_id)) {
                bestAt.push(specialty);
              }
            });
          }
          
          const bestSpecialtyBadge = bestAt.length > 0 ? 
            `<div class="best-specialty-badge">Top Rated for: ${bestAt.join(', ')}</div>` : '';
          
          hospitalCard.innerHTML = `
            <h3>${location.location_name}</h3>
            ${bestSpecialtyBadge}
            <div class="hospital-meta">
              <span><i class="fas fa-map-marker-alt"></i> ${location.address || 'N/A'} (${location.district || 'N/A'}, ${location.state || 'N/A'})</span>
              <span><i class="fas fa-hospital"></i> ${location.location_type || 'N/A'}</span>
              <span><i class="fas fa-star"></i> ${location.rating || 'N/A'}</span>
            </div>
            <p>Specialties: ${specialtiesText}</p>
            <button class="book-btn show-doctors">View Doctors</button>
            <div class="doctor-list">
              ${(location.doctors && location.doctors.length > 0) ? location.doctors.map(doctor => `
                <div class="doctor-card" data-id="${doctor.doctor_id}">
                  <div class="doctor-avatar">${(doctor.first_name || 'N').charAt(0)}</div>
                  <div class="doctor-info">
                    <h4>Dr. ${doctor.first_name} ${doctor.last_name || ''}</h4>
                    <p>${doctor.specialization || 'N/A'} | ${doctor.experience_years || 'N/A'} years experience</p>
                    <p>${doctor.qualifications || 'N/A'}</p>
                  </div>
                  <button class="book-btn select-doctor">Book</button>
                </div>
              `).join('') : '<p>No doctors listed for this location.</p>'}
            </div>
          `;
          hospitalsContainer.appendChild(hospitalCard);
        });
        
        document.querySelectorAll('.show-doctors').forEach(btn => {
          btn.addEventListener('click', function(e) {
            e.preventDefault();
            const card = this.closest('.hospital-card');
            document.querySelectorAll('.hospital-card').forEach(c => {
              if (c !== card) c.classList.remove('selected');
            });
            card.classList.toggle('selected');
            if (card.classList.contains('selected')) {
              selectedHospital = locationsData.find(h => h.location_id === card.getAttribute('data-id')); // Use location_id
            } else {
              selectedHospital = null;
            }
          });
        });
        
        document.querySelectorAll('.select-doctor').forEach(btn => {
          btn.addEventListener('click', function(e) {
            e.preventDefault();
            const doctorCard = this.closest('.doctor-card');
            const hospitalCard = doctorCard.closest('.hospital-card');
            document.querySelectorAll('.doctor-card').forEach(c => {
              c.classList.remove('selected');
            });
            doctorCard.classList.add('selected');
            const hospitalId = hospitalCard.getAttribute('data-id'); // Use location_id
            const doctorId = doctorCard.getAttribute('data-id'); 
            selectedHospital = locationsData.find(h => h.location_id === hospitalId); // Use location_id
            if (selectedHospital && selectedHospital.doctors) { 
                selectedDoctor = selectedHospital.doctors.find(d => d.doctor_id === doctorId);
            } else {
                selectedDoctor = null;
                console.error("Selected hospital or its doctors list is undefined.");
            }
            openFormModal();
          });
        });
      }

      if (stateFilter) {
        stateFilter.addEventListener('change', function() {
          const selectedState = this.value;
          const districts = selectedState ? (districtsByState[selectedState] || []) : [];
          if (districtFilter) { 
            districtFilter.innerHTML = '<option value="">All Districts</option>';
            districts.forEach(district => {
              const option = document.createElement('option');
              option.value = district;
              option.textContent = district;
              districtFilter.appendChild(option);
            });
          }
          applyFilters(); 
        });
      } else {
        console.error("State filter dropdown with id 'state-filter' not found!");
      }

      if (districtFilter) {
        districtFilter.addEventListener('change', applyFilters);
      } else {
        console.error("District filter dropdown with id 'district-filter' not found!");
      }

      // Initialize event listeners for dynamically added checkboxes later
      // The actual attachment is done when populating filters in initializePageData

      // CALL THE INITIALIZATION FUNCTION
      initializePageData();
      
      // Modal event listeners
      if (closeBtns) {
          closeBtns.forEach(btn => {
            btn.addEventListener("click", function() {
              if(formModal) formModal.classList.remove("show");
              if(successModal) successModal.classList.remove("show");
              document.body.style.overflow = "";
            });
          });
      }

      window.addEventListener("click", function(event) {
        if (event.target === formModal) {
          if(formModal) formModal.classList.remove("show");
          document.body.style.overflow = "";
        }
        if (event.target === successModal) {
          if(successModal) successModal.classList.remove("show");
          document.body.style.overflow = "";
        }
      });

      if (modalCancelFormBtn) {
          modalCancelFormBtn.addEventListener('click', function() {
            if(formModal) formModal.classList.remove("show");
            document.body.style.overflow = "";
          });
      } else {
          console.warn("Cancel button inside form modal not found.");
      }
      
      // --- START: MODIFIED BOOKING LOGIC ---
      if (modalBookAppointmentBtn) {
          modalBookAppointmentBtn.addEventListener('click', async function() { 
            const patientNameInput = formModal.querySelector('#patient-name');
            const patientPhoneInput = formModal.querySelector('#patient-phone');
            const appointmentDateInput = formModal.querySelector('#appointment-date');
            const appointmentTimeInput = formModal.querySelector('#appointment-time');
            const appointmentNotesInput = formModal.querySelector('#appointment-notes');
            
            const patientName = patientNameInput ? patientNameInput.value : '';
            const patientPhone = patientPhoneInput ? patientPhoneInput.value : '';
            const appointmentDate = appointmentDateInput ? appointmentDateInput.value : '';
            const appointmentTime = appointmentTimeInput ? appointmentTimeInput.value : '';
            const reason = appointmentNotesInput ? appointmentNotesInput.value : 'N/A';

            // Validation
            if (!patientName || !patientPhone || !appointmentDate || !appointmentTime) {
              alert('Please fill in all required fields: Name, Phone, Date, and Time.');
              return;
            }
            if (!selectedDoctor || !selectedHospital) {
                alert('Error: Doctor or Hospital not selected. Please re-select the doctor.');
                return;
            }
            const currentPatientId = localStorage.getItem("patientGuid"); // Use patientGuid from login
            if (!currentPatientId) {
                alert("Error: Patient session not found. Please log in again.");
                window.location.href = "/"; // Redirect to index/login for safety
                return;
            }

            const bookingData = {
                patient_id: currentPatientId,
                doctor_id: selectedDoctor.doctor_id, 
                location_id: selectedHospital.location_id, // Use location_id from selectedHospital
                appointment_date: appointmentDate,
                appointment_time: appointmentTime,
                reason: reason,
                patient_name: patientName 
            };

            console.log("Booking data to send to /api/book-appointment:", bookingData); // Browser console log

            try {
                const response = await fetch('/api/book-appointment', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(bookingData)
                });

                const result = await response.json();

                if (response.ok && result.success) {
                    console.log('Booking successful on frontend:', result.message); // Browser console log
                    if(formModal) formModal.classList.remove("show");
                    if(successModal) {
                        const successMsgContent = successModal.querySelector('p');
                        if(successMsgContent) successMsgContent.textContent = result.message; 
                        successModal.classList.add("show"); 
                    }
                    document.body.style.overflow = "hidden"; 
                } else {
                    console.error('Booking failed on frontend:', result.message); // Browser console log
                    alert(`Booking failed: ${result.message || 'Please try again.'}`);
                }
            } catch (error) {
                console.error('Error during booking fetch (frontend):', error); // Browser console log
                alert('An error occurred while booking the appointment. Please check the console and try again.');
            }
          });
      } else {
          console.warn("Book Appointment button inside form modal not found.");
      }
      // --- END: MODIFIED BOOKING LOGIC ---
      
      if (bookAnotherBtn) {
        bookAnotherBtn.addEventListener('click', function() {
          if(successModal) successModal.classList.remove("show");
          document.body.style.overflow = "";
        });
      }
    });
  </script>
  
  <style>
    /* Additional styles for the new features */
    .mt-3 {
      margin-top: 15px;
    }
    
    .best-in-specialty {
      border-left: 4px solid #68d391 !important;
      background-color: #f0fff4;
    }
    
    .best-specialty-badge {
      display: inline-block;
      background-color: #68d391;
      color: #fff;
      font-size: 0.8rem;
      padding: 4px 8px;
      border-radius: 4px;
      margin-bottom: 10px;
    }

    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.5);
      animation: fadeIn 0.3s;
    }

    .modal.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background-color: white;
      margin: auto;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 5px 30px rgba(0,0,0,0.3);
      width: 100%;
      max-width: 800px;
      position: relative;
      animation: slideDown 0.4s;
    }

    .success-content {
      text-align: center;
      padding: 40px;
      max-width: 500px;
    }

    .success-content h3 {
      color: #15803d;
      font-size: 1.5rem;
      margin-top: 0;
      margin-bottom: 20px;
    }

    .close-modal {
      position: absolute;
      top: 20px;
      right: 25px;
      color: #94a3b8;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      transition: color 0.2s;
    }

    .close-modal:hover {
      color: #475569;
    }

    @keyframes fadeIn {
      from {opacity: 0}
      to {opacity: 1}
    }

    @keyframes slideDown {
      from {transform: translateY(-50px); opacity: 0;}
      to {transform: translateY(0); opacity: 1;}
    }
  </style>
</body>
</html> 